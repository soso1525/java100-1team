<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>기업목록</title>
<link rel='stylesheet' href='../../node_modules/bootstrap/dist/css/bootstrap.min.css'>
<link rel='stylesheet' href='../../css/common.css'>
</head>
<body>
<div class='container'>

<header>
<nav class='navbar navbar-expand-lg navbar-light bg-red'>
<button type="button" class='btn btn-primary btn-sm' id="btn-apply" onclick="location.href='../apply/list'">apply</button>
<button type="button" class='btn btn-primary btn-sm' id="btn-notice" onclick="location.href='../notice/list'">notice</button>
<button class='navbar-toggler' type='button' data-toggle='collapse' data-target='#navbarNav' aria-controls='navbarNav' aria-expanded='false' aria-label='Toggle navigation'>
  <span class='navbar-toggler-icon'></span>
</button>
<div class='collapse navbar-collapse' id='navbarNav'>
<ul class='navbar-nav mr-auto'>
  <li class='nav-item' style="margin-left:0px; margin-top:0px; padding-right: 20px; font-size: 50px;">
    <a class='nav-link' href='../member/list'>CATCH</a>
  </li>
    <li class='nav-item' style="margin-left:0px; margin-top:0px; padding-right: 20px; font-size: 20px;">
    <a class='nav-link' href='../msg/sendList'>쪽지함</a>
  </li>
  <li class='nav-item' style="margin-left:353px; margin-top:85px;">
    <a class='nav-brand' href='../score/list'>
    <img src='/images/2_1.png' width='98' height='30' class='d-inline-block' alt=''>
    </a>
  </li>
  <li class='nav-item' style="margin-left:20px; margin-top:85px;">
    <a class='nav-brand' href='../study/list'>
    <img src='/images/2_2.png' width='98' height='30' class='d-inline-block' alt=''>
    </a>
  </li>
  <li class='nav-item' style="margin-left:20px; margin-top:85px;">
    <a class='nav-brand' href='../score/list'>
    <img src='/images/2_3.png' width='98' height='30' class='d-inline-block' alt=''>
    </a>
  </li>
  <li class='nav-item' style="margin-left:20px; margin-top:85px;">
    <a class='nav-brand' href='/app/auth/logout'>
    <img src='/images/2_5.png' width='98' height='30' class='d-inline-block' alt=''>
    </a>
  </li>
    </ul>



</div>
</nav>
</header>

<h1>기업 목록</h1>

<nav class="navbar navbar-light justify-content-between">
    <form style="margin-left: auto; margin-right: auto;" class="form-inline" action="list">
        <input name="words" class="form-control form-control-sm mr-sm-2"
            type="search" placeholder="keyword" aria-label="Search"> 
        <select class="form-control form-control-sm mr-sm-2">
            <option>서비스업</option>
            <option>제조/화학</option>
            <option>IT/웹/통신</option>
            <option>은행/금융업</option>
            <option>미디어/디자인</option>
            <option>교육업</option>
            <option>의료/제약/복지</option>
            <option>판매/유통</option>
            <option>건설업</option>
            <option>기관/협회</option>
        </select> 
        <input name="words" class="form-control form-control-sm mr-sm-2"
            type="search" placeholder="검색" aria-label="Search"> 
        <input name="ctype" class="form-control form-control-sm mr-sm-2"
            type="checkbox">신입
        <button style="margin-left: 10px"
            class="btn btn-sm btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
</nav>

<table id='list' class='table table-hover'>
<thead>
<tr>
<th>번호</th><th>이미지</th><th>기업이름</th><th>기업로고</th><th>채용시작일</th><th>채용종료일</th><th>조회수</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<button type="button" class='btn btn-primary btn-sm' id="btn-add" onclick="location.href='form.html'">추가</button>
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item disabled"><a class="page-link" 
        href="list?pn=-1"
        tabindex="-1">이전</a></li>
        
    <li class="page-item"><a class="page-link" href="#"></a></li>
    
    <li class="page-item disabled"><a class="page-link" 
        href="list?pn=1"
        tabindex="-1">다음</a></li>
  </ul>
</nav>

</div>

<script src='../node_modules/jquery/dist/jquery.min.js'></script>
<script src='../node_modules/popper.js/dist/umd/popper.min.js'></script>
<script src='../node_modules/bootstrap/dist/js/bootstrap.min.js'></script>
</body>
<script type="text/javascript">

  var /* prevBtn = $('#prevBtn'),
    currBtn = $('#currBtn'),
    nextBtn = $('#nextBtn'),
     */
    tbody = $('#list > tbody')
   /*  currPageNo = 1; */

load();

/* prevBtn.click(() => {
    load(currPageNo - 1)
});

nextBtn.click(() => {
    load(currPageNo + 1)
});
 */

function load() {
    
   /*  if (options == undefined) options = {};
     options.pn = pageNo; */
    
    $.ajax('../json/notice/list', {
        dataType: 'json',
        success: (result) => {
            
            tbody.html(""); 
            
            for (var data of result.list) {
                $('<tr>')
                    .html(  
                        "<td><a href='form.html?no=" + data.no + "'>" + data.no + "</a></td>" + 
                        "<td><img src='../../download/" + data.image + "' height" + "='50px'/></td>"+
                        "<td>" + data.companyMember.name + "</td>" +
                        "<td>" + data.companyMember.logo + "</td>" +
                        "<td>" + data.startDate + "</td>" +
                        "<td>" + data.endDate + "</td>" +
                        "<td>" + data.viewCount + "</td>" )
                    .appendTo(tbody);
            }
            
         /*    currPageNo = result.pageNo;
            currBtn.html(currPageNo);
            
            if (result.pageNo == 1) {
                $(prevBtn.parent()).addClass("disabled");
            } else {
                $(prevBtn.parent()).removeClass("disabled");
            }
            
            if (result.lastPageNo == result.pageNo) {
                $(nextBtn.parent()).addClass("disabled");
            } else {
                $(nextBtn.parent()).removeClass("disabled");
            } */
        },
        error: () => {
            window.alert('서버 실행 오류!');
        }
    });
     
}

</script>
</html>
