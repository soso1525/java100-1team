
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>catch</title>
<link rel='stylesheet'
	href='../node_modules/bootstrap/dist/css/bootstrap.min.css'>
<link rel='stylesheet' href='../css/common.css'>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand" href="../member/list.html">CATCH</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse"
			data-target="#navbarNav" aria-controls="navbarNav"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item active"><a class="nav-link" href="#">Job</a></li>
				<li class="nav-item"><a class="nav-link"
					href="../study/list.html">Study</a></li>
				<li class="nav-item"><a class="nav-link"
					href="../apply/list.html">Apply</a></li>
				<li class="nav-item"><a class="nav-link" href="../notice/list.html">Notice</a></li>
				<li class="nav-item"><a class="nav-link" href="#">Message</a></li>
				<li class="nav-item"><a class="nav-link"
					href="../app/auth/login">Login</a></li>
			</ul>
		</div>
	</nav>

	<h1 style="margin-top: 30px; margin-bottom: 30px">자소서 지원하기</h1>
	<form class="form" method="post" enctype="multipart/form-data">
		<input type="hidden" id="ano" name="ano"> 
		<input type="file"
			class="form-control" id="file" name="file">
		<input
			type="button" id="updateBtn" class="form-control" value="변경하기">
	</form>
	<table id='list' class='table table-hover'>
	<thead>
	<tr>
	<th>문항번호</th><th>문항</th><th>내용</th><th>삭제</th>
	</tr>
	</thead>
	<tbody></tbody>
	</table>
	<input type="button" id="questionAddBtn" class="form-control" value="추가">
	
	
	
	
	
	
	
	
<script src='../node_modules/handlebars/dist/handlebars.min.js'></script>
<script src='../node_modules/jquery/dist/jquery.min.js'></script>
<script src='../node_modules/popper.js/dist/umd/popper.min.js'></script>
<script src='../node_modules/bootstrap/dist/js/bootstrap.min.js'></script>
<script type="text/javascript" src="../js/context.js"></script>
	
	
<script id="template1" type="text/x-handlebars-template">
{{#each question}}
<tr>
  	<td><a href='../question/form.html?no={{no}}'>{{no}}</a></td>
	<td>{{article}}</td>
	<td>{{context}}</td>
	<td><a href='../question/delete?no={{no}}'>삭제</a></td>
</tr>
{{/each}}
</script>

<script type="text/javascript">
var updateBtn = $('#updateBtn'),
	anoItem = $('#ano'),
	fileItem = $('#file'),
	tbody = $('#list > tbody'),
	questionAddBtn = $('#questionAddBtn'),
	template1Src = $('#template1').html(),
	template1Engine = Handlebars.compile(template1Src);
	

var index = location.href.indexOf('?');
var qs = location.href.substr(index + 1);
var arr = qs.split('=');
$(() => {
	$.ajax(host + '/json/letter/' + arr[1], {
		dataType: 'json',
		success: (result) => {
			tbody.html(template1Engine(result));
		},
		error: () => {
			window.alert('서버 실행 오류!');
		}
	});
});
questionAddBtn.click(() => {
	$.ajax({
		success: (result) => {
			location.href = "../question/form.html?lno="+ arr[1];
		},
		error: () => {
			window.alert('서버 실행 오류!');
		}
	})
});
</script>

</body>
</html>

